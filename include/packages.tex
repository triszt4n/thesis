% thanks to http://tex.stackexchange.com/a/47579/71109
\usepackage{ifxetex}
\usepackage{ifluatex}
\newif\ifxetexorluatex % a new conditional starts as false
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi>0
  \xetexorluatextrue
\fi

\ifxetexorluatex
  \usepackage{fontspec}
\else
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage[lighttt]{lmodern}
\fi

\usepackage[english,magyar]{babel} % Alapértelmezés szerint utoljára definiált nyelv lesz aktív, de később külön beállítjuk az aktív nyelvet.

%\usepackage{cmap}
\usepackage{amsfonts,amsmath,amssymb} % Mathematical symbols.
%\usepackage[ruled,boxed,resetcount,linesnumbered]{algorithm2e} % For pseudocodes. % beware: this is not compatible with LuaLaTeX, see http://tex.stackexchange.com/questions/34814/lualatex-and-algorithm2e
\usepackage{booktabs} % For publication quality tables for LaTeX
\usepackage{graphicx}

%\usepackage{fancyhdr}
%\usepackage{lastpage}

\usepackage{anysize}
%\usepackage{sectsty}
\usepackage{setspace} % For setting line spacing

\usepackage[unicode]{hyperref} % For hyperlinks in the generated document.
\usepackage{xcolor}
\usepackage{listings} % For source code snippets.

\usepackage[amsmath,thmmarks]{ntheorem} % Theorem-like environments.

\usepackage[hang]{caption}

\newcommand{\selecthungarian}{
  \selectlanguage{magyar}
  \setlength{\parindent}{2em}
  \setlength{\parskip}{0em}
  \frenchspacing
}

\newcommand{\selectenglish}{
  \selectlanguage{english}
  \setlength{\parindent}{0em}
  \setlength{\parskip}{0.5em}
  \nonfrenchspacing
  \renewcommand{\figureautorefname}{Figure}
  \renewcommand{\tableautorefname}{Table}
  \renewcommand{\partautorefname}{Part}
  \renewcommand{\chapterautorefname}{Chapter}
  \renewcommand{\sectionautorefname}{Section}
  \renewcommand{\subsectionautorefname}{Section}
  \renewcommand{\subsubsectionautorefname}{Section}
}

\usepackage[numbers]{natbib}
\usepackage{xspace}

\usepackage{xurl} % For breaking long URLs in the bibliography.

% js listing
\usepackage{listings}
\usepackage[many]{tcolorbox}
\usepackage{xcolor}

% colors
\definecolor{white}{rgb}{1,1,1}
\definecolor{black}{rgb}{0,0,0}
\definecolor{middlegray}{rgb}{0.5,0.5,0.5}
\definecolor{lightgray}{rgb}{.95,.95,.95}
\definecolor{arsenic}{rgb}{0.23, 0.27, 0.29}
\definecolor{arsenicLight}{rgb}{0.20, 0.20, 0.20}
\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}
\definecolor{orange}{rgb}{0.8,0.3,0.3}
\definecolor{yac}{rgb}{0.6,0.6,0.1}
\definecolor{green}{rgb}{.2,0.6,0.3}
\definecolor{azure}{rgb}{0.0, 0.5, 1.0}
\definecolor{editorGray}{rgb}{0.95, 0.95, 0.95}
\definecolor{editorOcher}{rgb}{1, 0.5, 0}
\definecolor{editorGreen}{rgb}{0, 0.5, 0}
\definecolor{orange}{rgb}{1,0.45,0.13}
\definecolor{olive}{rgb}{0.17,0.59,0.20}
\definecolor{brown}{rgb}{0.69,0.31,0.31}
\definecolor{purple}{rgb}{0.38,0.18,0.81}
\definecolor{lightblue}{rgb}{0.1,0.57,0.7}
\definecolor{lightred}{rgb}{1,0.4,0.5}

\definecolor{vscodered}{HTML}{E53935}
\definecolor{vscodelightred}{HTML}{EF5350}
\definecolor{vscodeblue}{HTML}{1565C0}
\definecolor{vscodegreen}{HTML}{66BB6A}

\definecolor{lightblack}{HTML}{212121}
\definecolor{darkraspberry}{rgb}{0.53, 0.15, 0.34}

% blue hues
\definecolor{bleudefrance}{rgb}{0.19, 0.55, 0.91}
\definecolor{brandeisblue}{rgb}{0.0, 0.44, 1.0}
\definecolor{blue(ncs)}{rgb}{0.0, 0.53, 0.74}
\definecolor{coolblack}{rgb}{0.0, 0.18, 0.39}

% red hues
\definecolor{coralred}{rgb}{1.0, 0.25, 0.25}
\definecolor{darkred}{rgb}{0.55, 0.0, 0.0}

% general settings for listing
\lstset{
basicstyle=\normalsize\ttfamily,
basewidth  = {.5em,0.4em},
captionpos=t,
lineskip={2pt},
backgroundcolor=\color{white},
framextopmargin=6pt,
framexrightmargin=0.9em,
framexleftmargin=0.9em,
framexbottommargin=6pt,
frame=tb,
framerule=0pt,
framesep=6.5mm,
fillcolor=\color{white},
rulecolor=\color{middlegray},
numbers=left,
numberstyle=\normalfont\color{middlegray},
numbersep=16pt,
abovecaptionskip=-5pt, %space above the caption
belowcaptionskip=10pt, %space below the caption
extendedchars=true,
showstringspaces=false,
showspaces=false,
stepnumber=1, % the step between two line-numbers. If it is 1 each line will be numbered
tabsize=2,
breaklines=true,
showtabs=false,
upquote=true,
% German umlauts
literate=%
  {Ö}{{\"O}}1
{Ä}{{\"A}}1
{Ü}{{\"U}}1
{ß}{{\ss}}1
{ü}{{\"u}}1
{ä}{{\"a}}1
{ö}{{\"o}}1
}

% define language
\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, then, function, return, catch, switch, var, if, in, while, do, else, case, break, default, this, process},
  keywordstyle=\color{editorGreen}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, from, const, async, await, private, public, readonly, static, constructor, get, set, yield, interface, type},
  ndkeywordstyle=\color{vscodeblue}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{editorGreen}\ttfamily,
  stringstyle=\color{darkred}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  morestring=*[d]`,
  moredelim=[s][]{\$\{}{\}},
  morekeywords=[3]{@UseGuards, @ApiFoundResponse, @ApiQuery, @Controller, @Injectable, @Module, @Inject, @Body, @Param, @Query, @UseInterceptors, @UseFilters, @UploadedFile, @UsePipes, @Get, @Post, @Put, @Delete, @Patch, @CurrentUser, @Res, @Next, @Headers, @Session, @Request, @All, string, number, null, void, undefined},
  keywordstyle={[3]\color{darkraspberry}\bfseries}
}

\lstdefinelanguage{SQL}{
  keywords={select, where, from},
  keywordstyle=\color{editorGreen}\bfseries,
  ndkeywords={},
  ndkeywordstyle=\color{vscodeblue}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{--},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{editorGreen}\ttfamily,
  stringstyle=\color{darkred}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}


\lstdefinelanguage{HTML5}{
  language=html,
  sensitive=true,
  alsoletter={<>=-},
  morecomment=[s]{<!-}{-->},
  tag=[s],
  otherkeywords={
      % General
      >,
      % Standard tags
      <!DOCTYPE,
      </html, <html, <head, <title, </title, <style, </style, <link, </head, <meta, />,
      % body
      </body, <body,
      % Divs
      </div, <div, </div>,
      % Paragraphs
      </p, <p, </p>,
      % scripts
      </script, <script,
      % More tags...
      <canvas, /canvas>, <svg, <rect, <animateTransform, </rect>, </svg>, <video, <source, <iframe, </iframe>, </video>, <image, </image>, <header, </header, <article, </article
    },
  ndkeywords={
      % General
      =,
      % HTML attributes
      charset=, src=, id=, width=, height=, style=, type=, rel=, href=,
      % SVG attributes
      fill=, attributeName=, begin=, dur=, from=, to=, poster=, controls=, x=, y=, repeatCount=, xlink:href=,
      % properties
      margin:, padding:, background-image:, border:, top:, left:, position:, width:, height:, margin-top:, margin-bottom:, font-size:, line-height:,
      % CSS3 properties
      transform:, -moz-transform:, -webkit-transform:,
      animation:, -webkit-animation:,
      transition:,  transition-duration:, transition-property:, transition-timing-function:,
    }
}

\lstdefinelanguage{Terraform}{
  keywords={terraform, variable, locals, output, module, resource, data, backend, true, false, var, local},
  keywordstyle=\color{vscodegreen}\bfseries,
  ndkeywords={lifecycle, provisioner, connection, length, lookup, merge, coalesce, zipmap, flatten, try, null, for, if, else, each, in, template_file, object, map, string, number, null_resource},
  ndkeywordstyle=\color{vscodeblue}\bfseries,
  sensitive=false,
  comment=[l]{\#},
  commentstyle=\color{editorGreen}\ttfamily,
  stringstyle=\color{darkred}\ttfamily,
  moredelim=[s][]{\$\{}{\}},
  morestring=[b]',
  morestring=*[d]",
  identifierstyle=\color{black}\ttfamily,
}

\lstdefinelanguage{Dockerfile}{
  keywords={FROM, RUN, COPY, ADD, ENTRYPOINT, CMD,  ENV, ARG, WORKDIR, EXPOSE, LABEL, USER, VOLUME, STOPSIGNAL, ONBUILD, MAINTAINER, HEALTHCHECK},
  keywordstyle=\color{vscodeblue}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{\#},
  commentstyle=\color{editorGreen}\ttfamily,
  stringstyle=\color{darkred}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstdefinestyle{html} {%
% Code design
keywordstyle=\color{lightblack}\bfseries,
ndkeywordstyle=\color{lightblack}\bfseries,
identifierstyle=\color{lightblack},
commentstyle=\color{green}\ttfamily,
stringstyle=\color{darkred}\ttfamily,
% Code
language=HTML5,
%  alsolanguage=JavaScript,
alsodigit={.:;},
tabsize=2,
showtabs=false,
showspaces=false,
showstringspaces=false,
extendedchars=true,
breaklines=true,
% German umlauts
literate=%
  {Ö}{{\"O}}1
{Ä}{{\"A}}1
{Ü}{{\"U}}1
{ß}{{\ss}}1
{ü}{{\"u}}1
{ä}{{\"a}}1
{ö}{{\"o}}1
}

\lstdefinelanguage{CSS}
{morekeywords={color,background,margin,padding,margin,padding,font,weight,display,position,top,left,right,bottom,list,style,border,size,white,space,min,width, 	transition},
  sensitive=false,
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]",
}

\newcommand\YAMLcolonstyle{\color{darkred}\mdseries}
\newcommand\YAMLkeystyle{\color{black}\bfseries}
\newcommand\YAMLvaluestyle{\color{vscodeblue}\mdseries}

\lstdefinelanguage{YAML}{
keywords={true,false,null,y,n},
keywordstyle=\color{darkgray}\bfseries,
basicstyle=\YAMLkeystyle,                                 % assuming a key comes first
sensitive=false,
comment=[l]{\#},
morecomment=[s]{/*}{*/},
commentstyle=\color{editorGreen}\ttfamily,
stringstyle=\YAMLvaluestyle\ttfamily,
moredelim=[l][\color{orange}]{\&},
moredelim=[l][\color{magenta}]{*},
moredelim=**[il][\YAMLcolonstyle{:}\YAMLvaluestyle]{:},   % switch to value style at :
morestring=[b]',
morestring=[b]",
literate =    {---}{{\ProcessThreeDashes}}3
{>}{{\textcolor{red}\textgreater}}1
{|}{{\textcolor{red}\textbar}}1
{\ -\ }{{\mdseries\ -\ }}3,
}

\lstdefinestyle{css} {
  language=CSS,
  keywordstyle=\color{lightblack},
}

\lstdefinestyle{js} {
  language=JavaScript
}

\lstdefinestyle{tf} {
  language=Terraform
}

\lstdefinestyle{dockerfile} {
  language=Dockerfile
}

\lstdefinestyle{yaml} {
  language=YAML
}

\lstdefinestyle{sql} {
  language=SQL,
  keywordstyle=\color{azure}
}

% Hyphenation rules
\hyphenation{PostgreSQL}
\hyphenation{Cloud-Front}
\hyphenation{strea-ming}
